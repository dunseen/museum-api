# Development Dockerfile - optimized for hot reload
FROM node:20.16.0-alpine

RUN apk add --no-cache bash

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install all dependencies (including dev)
RUN npm ci

# Copy startup script
COPY docker/scripts/startup-dev.sh /scripts/

RUN chmod +x /scripts/startup-dev.sh && \
    sed -i 's/\r//g' /scripts/startup-dev.sh

ENV NODE_ENV=development

# Source code is mounted as volume in docker-compose

CMD ["/scripts/startup-dev.sh"]
